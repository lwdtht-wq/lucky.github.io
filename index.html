<!DOCTYPE html>
<html lang="zh-CN">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sketch — fade-in + hover highlight + click wobble</title>
<style>
  :root{ --ink:#2b2f77; }
  html,body{margin:0;background:#fff;font-family:system-ui,Segoe UI,Arial}
  .wrap{max-width:960px;margin:28px auto;padding:0 16px}
  h1{margin:0 0 10px;font-size:22px}
  .sub{color:#666;margin:0 0 12px}
  #stage{border:1px solid #e5e7eb;border-radius:12px;padding:12px;overflow:hidden}

  svg{display:block;width:100%;height:auto;background:#fff}
  svg *{vector-effect:non-scaling-stroke}

  /* 入场淡入上移 */
  @keyframes fadeInUp{
    from{opacity:0; transform: translateY(8px)}
    to{opacity:1; transform: translateY(0)}
  }
  .enter{ animation: fadeInUp .8s ease-out both }

  /* 线条描边入场（可选：让线条逐条出现） */
  .draw {
    stroke-dasharray: var(--len, 0);
    stroke-dashoffset: var(--len, 0);
    transition: stroke-dashoffset 1.0s ease;
  }
  .ready { stroke-dashoffset: 0; }

  /* 悬停高亮（交互1） */
  .hl { stroke:#3b82f6 !important; stroke-width:2.4 !important; filter:drop-shadow(0 0 2px rgba(59,130,246,.35)); }

  /* 点击整图“左右晃动”（交互2） */
  @keyframes wobble {
    0%   { transform: rotate(0deg) }
    20%  { transform: rotate(-3deg) }
    50%  { transform: rotate(3deg) }
    80%  { transform: rotate(-2deg) }
    100% { transform: rotate(0deg) }
  }
  .wobble-on { animation: wobble .6s ease-in-out 1; transform-origin:center }
</style>
<body>
  <div class="wrap">
    <h1>Sketch — 交互演示</h1>
    <p class="sub">包含：入场淡入 + 悬停高亮（任何线条）+ 点击整图左右晃动。</p>
    <div id="stage" class="enter"><!-- SVG 注入到这里 --></div>
  </div>

<script>
const SVG_URL = '11.svg'; // ← 如文件名不同改这里

async function main(){
  const stage = document.getElementById('stage');
  stage.textContent = 'Loading…';
  const txt = await fetch(SVG_URL).then(r=>r.text());
  stage.innerHTML = txt;

  const svg = stage.querySelector('svg');
  if(!svg) return;

  // 统一描边观感（不覆盖已有 stroke 的颜色）
  svg.querySelectorAll('path,line,polyline,polygon,rect,circle,ellipse').forEach((el,i)=>{
    if(!el.getAttribute('stroke')) el.setAttribute('stroke', getComputedStyle(document.documentElement).getPropertyValue('--ink').trim());
    el.setAttribute('stroke-linecap','round');
    el.setAttribute('stroke-linejoin','round');

    // 线条描边入场：计算长度，做轻微错峰
    let len = 0; try{ len = el.getTotalLength ? el.getTotalLength() : 0 }catch(e){ len = 0 }
    el.style.setProperty('--len', len);
    el.classList.add('draw');
    el.style.transitionDelay = (Math.min(i, 12) * 0.05)+'s'; // 最多延迟到 ~0.6s
    // 悬停高亮（交互1）
    el.addEventListener('pointerenter', ()=> el.classList.add('hl'));
    el.addEventListener('pointerleave', ()=> el.classList.remove('hl'));
  });

  // 触发描边入场
  requestAnimationFrame(()=>{
    svg.querySelectorAll('.draw').forEach(el=> el.classList.add('ready'));
  });

  // 点击整幅图触发 wobble（交互2）
  svg.style.cursor = 'pointer';
  svg.addEventListener('click', ()=>{
    svg.classList.remove('wobble-on');
    // 重新触发动画
    void svg.offsetWidth;
    svg.classList.add('wobble-on');
  });
}

main();
</script>
</body>
</html>
